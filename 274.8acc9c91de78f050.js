"use strict";(self.webpackChunkrs_lang_app=self.webpackChunkrs_lang_app||[]).push([[274],{8274:(wt,F,l)=>{l.r(F),l.d(F,{AudioChallengeModule:()=>bt});var C=l(6895),b=l(3039),D=l(4128),Z=l(8505),W=l(9751),N=l(727);class R extends N.w0{constructor(i,e){super()}schedule(i,e=0){return this}}const O={setInterval(s,i,...e){const{delegate:n}=O;return n?.setInterval?n.setInterval(s,i,...e):setInterval(s,i,...e)},clearInterval(s){const{delegate:i}=O;return(i?.clearInterval||clearInterval)(s)},delegate:void 0};var U=l(8737);const G={now:()=>(G.delegate||Date).now(),delegate:void 0};class _{constructor(i,e=_.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}}_.now=G.now;const L=new class E extends _{constructor(i,e=_.now){super(i,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}(class z extends R{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(i,e,n=0){return O.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;O.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let r,n=!1;try{this.work(i)}catch(a){n=!0,r=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,U.P)(n,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}});var J=l(3532);var Q=l(5577),o=l(4854),j=l(7517),t=l(8256),q=l(4033),Y=l(529),K=l(2229),$=l(4333),V=l(9237),X=l(5889),tt=l(5249);function et(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",13)(1,"div")(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"div",14)(5,"div",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.playAudio(a.word.audio))}),t.qZA(),t.TgZ(6,"div",16),t._uU(7),t.qZA()(),t.TgZ(8,"div",17),t._uU(9),t.qZA()()}if(2&s){const e=i.$implicit;t.xp6(2),t.Tol(e.success?"green":"red"),t.xp6(1),t.Oqu(e.word.word),t.xp6(4),t.Oqu(e.word.transcription),t.xp6(2),t.Oqu(e.word.wordTranslate)}}function nt(s,i){if(1&s&&(t.TgZ(0,"div",10)(1,"div",11)(2,"div"),t._uU(3,"WORD"),t.qZA(),t.TgZ(4,"div"),t._uU(5,"TRANSCRIPTION"),t.qZA(),t.TgZ(6,"div"),t._uU(7,"TRANSLATION"),t.qZA()(),t.YNc(8,et,10,6,"div",12),t.qZA()),2&s){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.gameStatistics)}}let st=(()=>{class s{constructor(){this.totalAttempts=o.vF,this.title=o.db,this.source=o.HQ+o.hn,this.mainPageLink="../../../",this.backlink="../../",this.attempts=0,this.duration=0,this.rightAnswersCount=0,this.rightAnswersPercent=0,this.playAgain=new t.vpe}playGame(e){this.playAgain.emit(e)}playAudio(e){new Audio(this.source+e).play()}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-audio-challenge-statistics"]],inputs:{attempts:"attempts",gameStatistics:"gameStatistics",duration:"duration",rightAnswersCount:"rightAnswersCount",rightAnswersPercent:"rightAnswersPercent"},outputs:{playAgain:"playAgain"},decls:19,vars:7,consts:[[1,"heading-1"],[1,"stats-container"],[1,"stats-head"],[1,"game-stats"],[1,"success"],[1,"green"],[1,"stats-buttons"],[1,"button-green",3,"click"],[1,"button-orange",3,"routerLink"],["class","words-stats",4,"ngIf"],[1,"words-stats"],[1,"stats-header"],["class","word-stat",4,"ngFor","ngForOf"],[1,"word-stat"],[1,"stats-transcription"],[1,"transcription-audio",3,"click"],[1,"transcription-word"],[1,"word-translation"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t._uU(6," PLAY TIME: "),t.TgZ(7,"span",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",4),t._uU(10," CORRECT: "),t.TgZ(11,"span",5),t._uU(12),t.qZA()()(),t.TgZ(13,"div",6)(14,"button",7),t.NdJ("click",function(){return n.playGame(!0)}),t._uU(15,"play again"),t.qZA(),t.TgZ(16,"button",8),t._uU(17," leave game "),t.qZA()()(),t.YNc(18,nt,9,1,"div",9),t.qZA()),2&e&&(t.xp6(1),t.Oqu(n.title),t.xp6(7),t.hij(" ",n.duration,"\xa0sec. "),t.xp6(4),t.lnq(" ",n.rightAnswersCount," / ",n.attempts," (",n.rightAnswersPercent,"%) "),t.xp6(4),t.Q6J("routerLink",n.mainPageLink),t.xp6(2),t.Q6J("ngIf",n.gameStatistics.length>0))},dependencies:[C.sg,C.O5,b.rH],styles:['@import"https://use.typekit.net/hyf0fpw.css";@import"https://fonts.googleapis.com/css2?family=Open+Sans&display=swap";.router-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;top:130px;width:1230px;margin:100px auto 0}.footer-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 auto;height:100px}.button-orange[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:800;font-size:14px;color:#404354;position:relative;display:flex;justify-content:center;align-items:center;height:34px;text-transform:uppercase;text-shadow:1px 1px 0 rgba(0,0,0,.15);color:#fff;border:0px;border-radius:10px;outline:1px dashed white;outline-offset:-4px;padding:0 20px;background:linear-gradient(#FF9100,#FF7A00);box-shadow:0 2px 2px #00000026;cursor:pointer}.button-orange[_ngcontent-%COMP%]:hover{background:linear-gradient(#FFB84D,#FF9100)}.button-orange[_ngcontent-%COMP%]:active{background:linear-gradient(#FF9100,#FFB84D);box-shadow:0 0 #00000026;top:2px}.button-green[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:800;font-size:14px;color:#404354;position:relative;display:flex;justify-content:center;align-items:center;height:34px;text-transform:uppercase;text-shadow:1px 1px 0 rgba(0,0,0,.15);color:#fff;border:0px;border-radius:10px;outline:1px dashed white;outline-offset:-4px;padding:0 20px;background:linear-gradient(#88E564,#6CD244);box-shadow:0 2px 2px #00000026;cursor:pointer}.button-green[_ngcontent-%COMP%]:hover{background-image:linear-gradient(#B8FA9F,#88E564)}.button-green[_ngcontent-%COMP%]:active{background-image:linear-gradient(#88E564,#B8FA9F);box-shadow:0 0 #00000026;top:2px}.button-dashed[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:400;font-size:14px;font-weight:500;color:#404354;position:relative;display:flex;justify-content:space-between;align-items:center;height:34px;padding:0 20px;border:1px dashed #404354;border-radius:10px;background:transparent;box-sizing:border-box}.button-dashed[_ngcontent-%COMP%]:hover{border:1px solid}.button-dashed-correct[_ngcontent-%COMP%]{animation-name:correct-answer;animation-duration:1s}.button-dashed-wrong[_ngcontent-%COMP%]{animation-name:wrong-answer;animation-duration:1s}@keyframes correct-answer{0%{background-color:#6cd244}to{background-color:#6cd24400}}@keyframes wrong-answer{0%{background-color:#eb4949}to{background-color:#eb494900}}.stats-container[_ngcontent-%COMP%]{border:1px dashed #898c9c;outline:3px solid #ffffff;border-radius:10px;box-shadow:0 4px 4px 3px #00000026;background-color:#fff;box-sizing:border-box;display:flex;flex-direction:column;gap:30px;padding:30px;width:480px;margin:3px auto}.heading-1[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:800;font-size:32px;text-transform:uppercase;width:500px;text-align:center;margin-left:auto;margin-right:auto}.green[_ngcontent-%COMP%]{color:#6cd244}.red[_ngcontent-%COMP%]{color:#eb4949}.game-word[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;justify-content:space-between;align-items:center}.stats-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end;gap:10px}.game-stats[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:800;font-size:16px;text-transform:uppercase;display:flex;flex-direction:column;justify-content:space-between}.success[_ngcontent-%COMP%]{margin-top:10px}.word-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.stats-header[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:400;font-size:12px;color:#404354;font-weight:800;display:grid;align-items:center;grid-template-columns:1fr 1fr 1fr;color:#fff;background-color:#42bee5;height:45px;padding:0 10px;border-radius:10px 10px 0 0}.word-stat[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:800;font-size:14px;color:#404354;display:grid;align-items:center;grid-template-columns:1fr 1fr 1fr;height:35px;padding:0 10px}.word-stat[_ngcontent-%COMP%]:nth-child(2n-1){background-color:#f5f5f5}.word-stat[_ngcontent-%COMP%]:last-child{border-radius:0 0 10px 10px}.stats-transcription[_ngcontent-%COMP%]{display:flex}.transcription-audio[_ngcontent-%COMP%]{width:14px;height:14px;background-image:url(assets/img/speaker.png);background-position:center;background-size:100%;background-repeat:no-repeat;margin-right:10px;cursor:pointer}.transcription-audio[_ngcontent-%COMP%]:hover{transform:scale(.95)}.transcription-audio[_ngcontent-%COMP%]:active{transform:scale(.9)}.transcription-word[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;font-size:14px;color:#ba6bd6}.word-translation[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:400;font-size:14px;color:#404354}']}),s})();function it(s,i){if(1&s&&(t.TgZ(0,"h1"),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(e.currentGame)}}function rt(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"app-game-level",7),t.NdJ("buttonsActions",function(r){t.CHM(e);const a=t.oxw();return a.currentLevel=r,t.KtG(a.startGame())}),t.qZA()}}function ot(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",8)(1,"h2",9),t._uU(2),t.qZA(),t.TgZ(3,"div",10)(4,"app-menu-button",11),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.startGame())}),t.qZA(),t._UZ(5,"app-menu-button",12),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(1),t.Udp("color",e.getColor(e.currentLevel)),t.xp6(1),t.AsE(" LEVEL:\xa0\xa0 ",e.currentLevel,"\xa0\xa0\xa0PAGE:\xa0\xa0 ",e.currentPage," "),t.xp6(2),t.Q6J("gameName",e.buttonStart),t.xp6(1),t.Q6J("gameName",e.buttonCancel)("routerLink",e.mainPageLink)}}function at(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"app-audio-challenge-statistics",13),t.NdJ("playAgain",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.playAgain(r))}),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("gameStatistics",e.gameStatistics)("duration",e.duration)("rightAnswersCount",e.rightAnswersCount)("rightAnswersPercent",e.rightAnswersPercent)("attempts",e.attempt)}}function lt(s,i){if(1&s&&(t.TgZ(0,"div")(1,"span"),t._uU(2,"LOADING ... "),t.qZA(),t._UZ(3,"progress",29),t.qZA()),2&s){const e=t.oxw(2);t.xp6(3),t.s9C("value",e.progress)}}function dt(s,i){if(1&s&&t._UZ(0,"div",30),2&s){const e=i.$implicit;t.ekj("attempt-success",1===e)("attempt-failed",0===e)}}function ct(s,i){if(1&s&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.ekj("no-show",e.isShowInstruction),t.xp6(1),t.hij(" ",e.instructions," ")}}function ut(s,i){1&s&&t._UZ(0,"div",32),2&s&&t.ekj("red-heart",!!i.$implicit)}function pt(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",33),t.NdJ("click",function(){const a=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.checkAnswer(a))}),t.TgZ(1,"span",34),t._uU(2),t.qZA(),t.TgZ(3,"span",35),t._uU(4),t.qZA()()}if(2&s){const e=i.$implicit,n=i.index,r=t.oxw(2);t.ekj("speaker-disable",r.isInProgress)("right-answer-button",n===r.rightButtonNumber)("right-answer-keyboard",n===r.keyboardPress&&n===r.rightButtonNumber)("wrong-answer-keyboard",n===r.keyboardPress&&n!==r.rightButtonNumber)("wrong-answer-button",n!==r.rightButtonNumber),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.word)}}function gt(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",14),t.YNc(1,lt,4,1,"div",0),t.TgZ(2,"div",15),t._uU(3),t.qZA(),t.TgZ(4,"div",16)(5,"div",17),t.YNc(6,dt,1,4,"div",18),t.qZA()(),t.TgZ(7,"div",19),t.YNc(8,ct,2,3,"span",20),t.TgZ(9,"div",21),t.YNc(10,ut,1,2,"div",22),t.qZA(),t.TgZ(11,"div",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.sayWord())}),t.qZA(),t.TgZ(12,"div",24),t.YNc(13,pt,5,12,"div",25),t.qZA()(),t.TgZ(14,"div",26)(15,"app-menu-button",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.restartGame())}),t.qZA(),t._UZ(16,"app-menu-button",28),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isInProgress),t.xp6(2),t.Oqu(e.currentGame),t.xp6(3),t.Q6J("ngForOf",e.attemptsInRow),t.xp6(2),t.Q6J("ngIf",e.isGameStart&&!e.isGameEnded),t.xp6(2),t.Q6J("ngForOf",e.lives),t.xp6(1),t.ekj("speaker-on",e.isSpeakerOn)("speaker-disable",e.isInProgress),t.xp6(2),t.Q6J("ngForOf",e.guessButtons),t.xp6(2),t.Q6J("gameName",e.buttonRestart),t.xp6(1),t.Q6J("routerLink",e.mainPageLink)("gameName",e.buttonLeave)}}function ht(s,i){1&s&&(t.TgZ(0,"div",36),t._uU(1," You don't have enough difficult words to begin game, add more or choose another level! "),t.qZA())}const ft=[{path:"",component:(()=>{class s{constructor(e,n,r,a,d,c,u){this.activatedRoute=e,this.pageDataService=n,this.http=r,this.httpService=a,this.userDataService=d,this.queryService=c,this.router=u,this.source=o.HQ+o.hn,this.isGameStart=!1,this.isGameEnded=!1,this.isFromTextbook=!1,this.isInProgress=!0,this.isDenied=!1,this.isShowInstruction=!1,this.isSpeakerOn=!1,this.isAlert=!1,this.currentGame=o.VS,this.currentLevel=-1,this.currentPage=-1,this.loadingProgress=0,this.progress=0,this.dataLength=0,this.attempt=0,this.arrayForGuess=[],this.wordsArray=[],this.wordtoSayId=0,this.userWords=[],this.buttonRestart=o.FR,this.buttonLeave=o.Mi,this.buttonCancel=o.Zm,this.buttonStart=o.nk,this.levelsColors=o.hl,this.mainPageLink="../../../",this.guessButtons=Array(4).fill({}),this.rightButtonNumber=0,this.lives=[],this.livesInGame=5,this.attemptsInRow=Array(10).fill(-1),this.timeStart=0,this.timeFinish=0,this.gameStatistics=[],this.duration=0,this.keyboardPress=-1,this.instructions=o.ue,this.rightAnswersCount=0,this.rightAnswersPercent=0,this.userStatistics={learnedWords:0,optional:{}},this.todayGameOptions={attempts:0,success:0,rightGuessesInRow:0},this.allTimeGameOptions={attempts:0,success:0,rightGuessesInRow:0},this.maxRowInGame=0,this.learnedWords=0,this.userDifficultWords=0,this.subscription=this.activatedRoute.params.subscribe(p=>{this.currentLevel=p.level,this.currentPage=p.page,this.currentLevel>6&&(this.currentPage=0)})}playAgain(e){e&&this.restartGame()}getkey(e){this.keyboardPress=Number(e.key)-1,!this.isGameEnded&&!this.isDenied&&(this.keyboardPress<4&&this.keyboardPress>-1&&this.checkAnswer(this.keyboardPress),("Enter"===e.key||" "===e.key)&&(this.sayWord(),this.isSpeakerOn=!0))}getkeyUp(e){this.keyboardPress=-1,this.isSpeakerOn=!1}ngOnInit(){this.pageDataService.setPage(o.Xy.MiniGames),this.isFromTextbook=-1!=this.currentPage&&this.currentLevel>-1,this.getLives(this.livesInGame),this.userDataService.isRegistered()&&(this.userId=this.userDataService.getUser().userId,this.getUserWords(),this.getNumberOfDifficultWords()),setInterval(()=>this.isShowInstruction=!this.isShowInstruction,5e3)}ngOnDestroy(){this.subscription.unsubscribe()}getLives(e){e<6&&(this.lives=Array(5).fill(0).map((n,r)=>r<e?1:0))}getColor(e){return this.levelsColors[+e-1].color}startGame(){this.isGameStart=!0,this.getLives(this.livesInGame),this.timeStart=Date.now(),this.currentLevel>6?this.userDifficultWords>3?this.loadForUser():(this.isAlert=!0,this.isGameStart=!1,setTimeout(()=>{this.isAlert=!1},3e3)):this.load()}load(){let e=0;e=-1==this.currentPage?void 0:this.currentPage-1;const r=new j.Z(this.httpService,this.currentLevel,e).createWordsResponse(),a=r.length;(0,D.D)(r.map(c=>c.pipe((0,Z.b)(()=>{this.loadingProgress++,this.progress=this.loadingProgress/a*100})))).subscribe(c=>{this.filterWords(c)})}filterWords(e){let n=[],r=[];if(this.userDataService.isRegistered()){const a=this.userDataService.getUser()?.userId;this.httpService.getData(`/users/${a}/words`).subscribe(d=>{n=d.filter(c=>"easy"===c.difficulty&&this.currentPage>-1).map(c=>c.wordId),e.forEach(c=>{for(let u=0;u<c.length;u++)n.includes(c[u].id)||r.push(c[u])}),this.arrayForGuess=r,this.begin()})}else e.forEach(a=>{r.push(...a)}),this.arrayForGuess=r,this.begin()}begin(){this.isDenied||(this.dataLength=this.arrayForGuess.length,this.dataLength<4&&this.currentLevel<7?(this.isAlert=!0,this.isGameStart=!1,setTimeout(()=>{this.isAlert=!1},3e3)):(this.isInProgress=!1,this.getWords()))}getWords(){this.guessButtons=Array(4).fill({}),this.rightButtonNumber=Math.round(3*Math.random()),this.guessButtons=this.guessButtons.map((e,n)=>{const r=Math.round(Math.random()*(this.dataLength-1)),a=this.arrayForGuess[r];return n===this.rightButtonNumber&&(this.rightWord=a),{id:a?.id,word:a?.wordTranslate}}),setTimeout(()=>this.checkDuplicates(this.guessButtons))}checkDuplicates(e){new Set(e.map(n=>n.id)).size<4&&this.getWords()}getNumberOfDifficultWords(){this.http.get(o.HQ+o.az.register+o.hn+this.userId+`/aggregatedWords?wordsPerPage=4000&filter=${encodeURIComponent('{"userWord.difficulty":"hard"}')}`).subscribe({next:e=>{this.userDifficultWords=e[0].paginatedResults.length}})}loadForUser(){this.http.get(o.HQ+o.az.register+o.hn+this.userId+o.az.words).pipe((0,Z.b)(()=>{this.loadingProgress++,this.progress=100*this.loadingProgress})).subscribe({next:e=>{this.userWords=e,this.userWords=this.userWords.filter(n=>n.difficulty===o.av.Hard),this.userDifficultWords=this.userWords.length,this.userWords.forEach(n=>{this.httpService.getData(`/words/${n.wordId}`).subscribe({next:r=>{this.arrayForGuess.push(r),this.begin()}})})}})}restartGame(){this.isGameStart=!1,this.isGameEnded=!1,this.isInProgress=!0,this.isDenied=!1,this.loadingProgress=0,this.progress=0,this.attempt=0,this.attemptsInRow=Array(10).fill(-1),this.gameStatistics=[],this.rightAnswersCount=0,this.arrayForGuess=[],this.livesInGame=5}sayWord(){new Audio(this.source+this.rightWord?.audio).play()}checkAnswer(e){this.isDenied=!0;let n=-1,r="";e===this.rightButtonNumber?(n=1,r=o.LY.success,this.maxRowInGame++,this.rightAnswersCount++):(n=0,this.livesInGame--,this.getLives(this.livesInGame),r=o.LY.failed,this.maxRowInGame=0);const a=!!n;this.updateWordStatistics(this.rightWord,a),this.putStatistics(this.rightWord,a),this.attemptsInRow[this.attempt]=n,this.attempt++,new Audio(r).play(),this.attempt<o.vF&&this.livesInGame>0?setTimeout(()=>{this.isDenied=!1,this.begin()},500):(this.timeFinish=Date.now(),this.duration=Math.round((this.timeFinish-this.timeStart)/1e3),this.rightAnswersPercent=Number((this.rightAnswersCount/this.attempt*100).toFixed(1)),this.updateUserStatistics(this.maxRowInGame,this.rightAnswersCount,this.attempt),setTimeout(()=>this.isGameEnded=!0,1e3))}putStatistics(e,n){this.gameStatistics?.push({word:e,success:n})}updateWordStatistics(e,n){let d,r={difficulty:o.av.Learned,optional:{}},a=0;const c=o.HQ+o.az.register+o.hn+this.userId+o.az.words+o.hn+e.id;if(!this.userDataService.isRegistered())return;this.isWordInUserWords(e.id)||(this.http.post(c,r).subscribe(),this.getUserWords());let h,u=o.av.Learned,p=0,A=0,k=0,g=0;(function H(s=0,i,e=L){let n=-1;return null!=i&&((0,J.K)(i)?e=i:n=i),new W.y(r=>{let a=function B(s){return s instanceof Date&&!isNaN(s)}(s)?+s-e.now():s;a<0&&(a=0);let d=0;return e.schedule(function(){r.closed||(r.next(d++),0<=n?this.schedule(void 0,n):r.complete())},a)})})(1e3).pipe((0,Q.z)(()=>this.http.get(c))).subscribe({next:I=>{d=I;const w=d?.difficulty,v=d?.optional?.rightGuessesInRow;let f=d?.optional?.attempts,m=d?.optional?.success;const x=d?.optional?.dateFirstTime,y=d?.optional?.dateFirstTime;a=n?1:0,h=y||0,null==f&&(f=0,g=Date.now()),null==m&&(m=0,g=Date.now()),void 0===v?(p=a,g=Date.now()):p=n?v+1:0,w===o.av.Hard&&(u=o.av.Hard),p>2&&w!==o.av.Hard&&(p=0,u=o.av.Easy,h=Date.now(),this.learnedWords++),p>4&&w===o.av.Hard&&(p=0,u=o.av.Easy,h=Date.now(),this.learnedWords++),A=f+1,k=m+a,(0===x||void 0===x)&&(g=Date.now()),w===o.av.Easy&&!1===n&&(u=o.av.Learned),r={difficulty:u,optional:{rightGuessesInRow:p,attempts:A,success:k,dateFirstTime:g,dateEasy:h}},this.http.put(c,r).subscribe(P=>console.log(P))}})}isWordInUserWords(e){return!!this.userWords.find(n=>n.wordId===e)}getUserWords(){this.http.get(o.HQ+o.az.register+o.hn+this.userId+o.az.words).subscribe({next:e=>{this.userWords=e}})}updateUserStatistics(e,n,r=o.vF){if(!this.userDataService.isRegistered())return;let a,d=0,c=0,u=0,p=Date.now(),A=0,k=0,g=0,h=0,T={learnedWords:0,optional:{sprint:void 0,audioChallenge:void 0}};a=this.http.put(o.HQ+o.az.register+o.hn+this.userId+o.az.statistics,null),a.subscribe(),this.http.get(o.HQ+o.az.register+o.hn+this.userId+o.az.statistics).subscribe({next:I=>{this.userStatistics=I;const w=this.userStatistics?.optional?.sprint;let v=this.userStatistics?.learnedWords;v||(v=0);let f=this.userStatistics?.optional?.audioChallenge?.today?.attempts;f||(f=0);let m=this.userStatistics?.optional?.audioChallenge?.today?.success;m||(m=0);let x=this.userStatistics?.optional?.audioChallenge?.today?.rightGuessesInRow;x||(x=0);let y=this.userStatistics?.optional?.audioChallenge?.today?.date;y||(y=Date.now());let P=this.userStatistics?.optional?.audioChallenge?.allTime?.attempts;P||(P=0);let S=this.userStatistics?.optional?.audioChallenge?.allTime?.success;S||(S=0);let M=this.userStatistics?.optional?.audioChallenge?.allTime?.rightGuessesInRow;M||(M=0),new Date(p).getDate()===new Date(y).getDate()?(d=f+r,c=m+n,u=e>x?e:x):(d=r,c=n,u=e),A=P+r,k=S+n,g=e>M?e:M,this.todayGameOptions={attempts:d,success:c,rightGuessesInRow:u,date:p},this.allTimeGameOptions={attempts:A,success:k,rightGuessesInRow:g},h=v+this.learnedWords,this.learnedWords=0,T={learnedWords:h,optional:{sprint:w,audioChallenge:{today:this.todayGameOptions,allTime:this.allTimeGameOptions}}},a=this.http.put(o.HQ+o.az.register+o.hn+this.userId+o.az.statistics,T),a.subscribe()}})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(b.gz),t.Y36(q.h),t.Y36(Y.eN),t.Y36(K.O),t.Y36($.M),t.Y36(V._),t.Y36(b.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-audio-challenge"]],hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(a){return n.getkey(a)},!1,t.Jf7)("keyup",function(a){return n.getkeyUp(a)},!1,t.Jf7)},decls:7,vars:6,consts:[[4,"ngIf"],["class","level",3,"buttonsActions",4,"ngIf"],["class","from-textbook",4,"ngIf"],[1,"wrapper"],[3,"gameStatistics","duration","rightAnswersCount","rightAnswersPercent","attempts","playAgain",4,"ngIf"],["class","game-container",4,"ngIf"],["class","alert",4,"ngIf"],[1,"level",3,"buttonsActions"],[1,"from-textbook"],[1,"title-from-textbook"],[1,"title-buttons-container"],[1,"title-button-start",3,"gameName","click"],[1,"title-button-cancel",3,"gameName","routerLink"],[3,"gameStatistics","duration","rightAnswersCount","rightAnswersPercent","attempts","playAgain"],[1,"game-container"],[1,"title"],[1,"attempts-block"],[1,"attempts-wrapper"],["class","attempt",3,"attempt-success","attempt-failed",4,"ngFor","ngForOf"],[1,"main-block"],["class","instructions",3,"no-show",4,"ngIf"],[1,"hearts-block"],["class","heart",3,"red-heart",4,"ngFor","ngForOf"],[1,"speaker",3,"click"],[1,"guess-button-container"],["class","guess-button",3,"speaker-disable","right-answer-button","right-answer-keyboard","wrong-answer-keyboard","wrong-answer-button","click",4,"ngFor","ngForOf"],[1,"button-block"],[1,"button-restart",3,"gameName","click"],[1,"button-leave",3,"routerLink","gameName"],["max","100",1,"progress-scale",3,"value"],[1,"attempt"],[1,"instructions"],[1,"heart"],[1,"guess-button",3,"click"],[1,"key-number"],[1,"key-word"],[1,"alert"]],template:function(e,n){1&e&&(t.YNc(0,it,2,1,"h1",0),t.YNc(1,rt,1,0,"app-game-level",1),t.YNc(2,ot,6,7,"div",2),t.TgZ(3,"div",3),t.YNc(4,at,1,5,"app-audio-challenge-statistics",4),t.YNc(5,gt,17,13,"div",5),t.YNc(6,ht,2,0,"div",6),t.qZA()),2&e&&(t.Q6J("ngIf",!n.isGameStart),t.xp6(1),t.Q6J("ngIf",!n.isFromTextbook&&!n.isGameStart),t.xp6(1),t.Q6J("ngIf",n.isFromTextbook&&!n.isGameStart),t.xp6(2),t.Q6J("ngIf",n.isGameEnded),t.xp6(1),t.Q6J("ngIf",n.isGameStart&&!n.isGameEnded),t.xp6(1),t.Q6J("ngIf",n.isAlert))},dependencies:[C.sg,C.O5,b.rH,X.p,tt.Z,st],styles:['@import"https://use.typekit.net/hyf0fpw.css";@import"https://fonts.googleapis.com/css2?family=Open+Sans&display=swap";.router-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;top:130px;width:1230px;margin:100px auto 0}.footer-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 auto;height:100px}.button-orange[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:800;font-size:14px;color:#404354;position:relative;display:flex;justify-content:center;align-items:center;height:34px;text-transform:uppercase;text-shadow:1px 1px 0 rgba(0,0,0,.15);color:#fff;border:0px;border-radius:10px;outline:1px dashed white;outline-offset:-4px;padding:0 20px;background:linear-gradient(#FF9100,#FF7A00);box-shadow:0 2px 2px #00000026;cursor:pointer}.button-orange[_ngcontent-%COMP%]:hover{background:linear-gradient(#FFB84D,#FF9100)}.button-orange[_ngcontent-%COMP%]:active{background:linear-gradient(#FF9100,#FFB84D);box-shadow:0 0 #00000026;top:2px}.button-green[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:800;font-size:14px;color:#404354;position:relative;display:flex;justify-content:center;align-items:center;height:34px;text-transform:uppercase;text-shadow:1px 1px 0 rgba(0,0,0,.15);color:#fff;border:0px;border-radius:10px;outline:1px dashed white;outline-offset:-4px;padding:0 20px;background:linear-gradient(#88E564,#6CD244);box-shadow:0 2px 2px #00000026;cursor:pointer}.button-green[_ngcontent-%COMP%]:hover{background-image:linear-gradient(#B8FA9F,#88E564)}.button-green[_ngcontent-%COMP%]:active{background-image:linear-gradient(#88E564,#B8FA9F);box-shadow:0 0 #00000026;top:2px}.button-dashed[_ngcontent-%COMP%]{font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:400;font-size:14px;font-weight:500;color:#404354;position:relative;display:flex;justify-content:space-between;align-items:center;height:34px;padding:0 20px;border:1px dashed #404354;border-radius:10px;background:transparent;box-sizing:border-box}.button-dashed[_ngcontent-%COMP%]:hover{border:1px solid}.button-dashed-correct[_ngcontent-%COMP%]{animation-name:correct-answer;animation-duration:1s}.button-dashed-wrong[_ngcontent-%COMP%]{animation-name:wrong-answer;animation-duration:1s}@keyframes correct-answer{0%{background-color:#6cd244}to{background-color:#6cd24400}}@keyframes wrong-answer{0%{background-color:#eb4949}to{background-color:#eb494900}}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{margin-bottom:50px}  .level .solid-stroke-container{margin-bottom:400px}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:0;gap:30px;width:565px;height:464.39px;margin:10px auto 85px}.title[_ngcontent-%COMP%]{width:304px;height:32px;font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:600;font-size:32px;text-transform:uppercase;color:#000}.attempts-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;padding:20px 0 0;gap:5px;width:238px;height:41px}.attempts-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:238px;height:21px}.main-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-around;padding:3px;gap:10px;width:705px;height:267.39px;left:0px;top:133px;background:#ffffff;border-radius:10px;outline:1px dashed #898c9c;outline-offset:-4px;filter:drop-shadow(0px 4px 4px rgba(0,0,0,.15))}.button-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:0;gap:10px;width:255px;height:34px;filter:drop-shadow(0px 2px 2px rgba(0,0,0,.15))}  .button-restart button{width:109px}  .button-leave button{width:136px}  .title-button-start button{width:109px;background-image:linear-gradient(180deg,#88e564 0%,#6cd244 100%)}  .title-button-start button:hover{background-image:linear-gradient(180deg,#B8FA9F 0%,#88E564 100%)}  .title-button-start button:active{background-image:linear-gradient(180deg,#88E564 0%,#B8FA9F 100%)}  .title-button-cancel button{width:136px}.hearts-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:0;gap:10px;width:152px;height:22px}.speaker[_ngcontent-%COMP%]{width:56px;height:56px;background-image:url(assets/img/speaker.png);position:relative;margin-top:-50px;background-repeat:no-repeat;opacity:.9;cursor:pointer}.speaker[_ngcontent-%COMP%]:hover, .speaker-on[_ngcontent-%COMP%]{transform:scale(.95)}.speaker[_ngcontent-%COMP%]:active{transform:scale(.9);opacity:1}.guess-button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:0;gap:5px;width:660px;height:34px}.guess-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:161px;height:30px;padding:0;border:1px dashed black;border-radius:10px;font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:400;font-size:14px;color:#404354;cursor:pointer}.guess-button.guess-button[_ngcontent-%COMP%]:hover{border:1px solid black}.hearts-block[_ngcontent-%COMP%]{position:relative;top:-50px}.heart[_ngcontent-%COMP%]{width:30px;height:22px;background-image:url(assets/img/white-heart.png);background-repeat:no-repeat}.red-heart[_ngcontent-%COMP%]{animation-name:hearts-animation;animation-duration:3s;background-image:url(assets/img/red-heart.png);background-repeat:no-repeat}.attempt[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:15px;height:15px;background-image:url(assets/img/small-grey-circle.png);background-repeat:no-repeat}.attempt-success[_ngcontent-%COMP%]{animation-name:attempt-animation;animation-duration:1s;width:25px;height:25px;background-image:url(assets/img/green-check-mark.png)}.attempt-failed[_ngcontent-%COMP%]{animation-name:attempt-animation;animation-duration:1s;width:25px;height:25px;background-image:url(assets/img/red-cross.png)}.from-textbook[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;margin-top:100px;margin-bottom:450px}.title-buttons-container[_ngcontent-%COMP%]{display:flex;gap:30px;margin-top:50px}.right-answer-button[_ngcontent-%COMP%]:active, .right-answer-keyboard[_ngcontent-%COMP%]{background-color:#88e564;border:none}.wrong-answer-button[_ngcontent-%COMP%]:active, .wrong-answer-keyboard[_ngcontent-%COMP%]{background-color:#eb4949;border:none}.progress-scale[_ngcontent-%COMP%]{width:200px}.speaker-disable[_ngcontent-%COMP%], button-disable[_ngcontent-%COMP%]{opacity:.3;cursor:auto}.speaker-disable[_ngcontent-%COMP%]:hover{transform:scale(1)}.button-disable[_ngcontent-%COMP%]:hover{border:1px dashed black}.key-number[_ngcontent-%COMP%]{margin-left:5px;font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:400;font-size:12px;color:#404354;color:#ba6bd6;width:5px}.key-word[_ngcontent-%COMP%]{margin-right:10px;word-wrap:break-word;width:125px}.instructions[_ngcontent-%COMP%]{color:#ba6bd6!important;font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:400;font-size:12px;color:#404354;margin-top:50px;margin-bottom:0;padding:0;opacity:0;position:relative;top:-40px}@keyframes attempt-animation{0%{transform:scale(.1)}to{transform:scale(1)}}@keyframes hearts-animation{0%{transform:scale(.1)}20%{transform:scale(1)}40%{transform:scale(.5)}60%{transform:scale(1)}80%{transform:scale(.5)}to{transform:scale(1)}}.no-show[_ngcontent-%COMP%]{opacity:1;transition:2s}.alert[_ngcontent-%COMP%]{text-align:center;font-family:new-rubrik-edge,sans-serif;font-style:normal;font-weight:600;font-size:32px;text-transform:uppercase;position:relative;top:-300px}']}),s})()}];let mt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[b.Bz.forChild(ft),b.Bz]}),s})();var xt=l(4466);let bt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[C.ez,mt,xt.m]}),s})()}}]);